# 颜色

vim没有高亮显示
在vim配置文件，如/etc/vimrc或者`~/.vimrc`中配置

```shell
syntax on
```

设置如下变量（可以增加到/etc/profile）

```shell
export TERM=linux
```

# 基本使用

    set nu  设置行号
    set nonu  取消行号

# 各种插入模式

    a   在光标后插入
    A   移动到行尾后开始插入
    o   在当前行后插入一个新行
    O   在当前行前插入一个新行
    cw  替换从光标所在位置后到一个单词结尾的字符
# 移动光标

```
进入vim后键入 '0 即回到当初你编辑的位置
ctrl + o 回到光标回到上次位置

h ：光标左移一个字符
l ：光标右移一个字符
space：光标右移一个字符
Backspace：光标左移一个字符
k或Ctrl+p：光标上移一行
j或Ctrl+n ：光标下移一行
Enter ：光标下移一行
w或W ：光标右移一个字至字首
b或B ：光标左移一个字至字首
e或E ：光标右移一个字至字尾
) ：光标移至句尾
( ：光标移至句首
}：光标移至段落开头
{：光标移至段落结尾
nG：光标移至第n行首
n+：光标下移n行
n-：光标上移n行
n$：光标移至第n行尾
H ：光标移至屏幕顶行
M ：光标移至屏幕中间行
L ：光标移至屏幕最后行
0：（注意是数字零）光标移至当前行首
$：光标移至当前行尾

gg 跳到文件的开始
G 跳到文件的结束
CTRL-D 向下半页
CTRL-U 向上半页
CTRL-F 向前一页
CTRL-B 向后一页

^ → 到本行第一个不是blank字符的位置（所谓blank字符就是空格，tab，换行，回车等）
g_ → 到本行最后一个不是blank字符的位置。
/pattern → 搜索 pattern 的字符串（陈皓注：如果搜索出多个匹配，可按n键到下一个）

10gg 或10G 跳到第10行
:10 调到第10行
```

# 屏幕翻滚类命令

    Ctrl+u：向文件首翻半屏
    Ctrl+d：向文件尾翻半屏
    Ctrl+f：向文件尾翻一屏
    Ctrl＋b；向文件首翻一屏

# 复制、剪切、粘贴

```
选定文本块，使用v进入可视模式；移动光标键选定内容;
复制选定块到缓冲区，用y；
剪切选定块到缓冲区，用d;
P 粘贴,注：p/P都可以，p是表示在当前位置之后，P表示在当前位置之前
yy 拷贝当前行
yw复制当前光标所在位置到单词尾字符的内容到vi缓存区，相当于复制一个单词
y$复制光标所在位置到行尾内容到缓存区
y^复制光标所在位置到行首内容到缓存区
#yy例如：5yy就是复制5行，将复制当前行及随后的n-1行
#yw例如：2yw就是复制两个单词

#dd例如：5dd将剪切当前行及随后的5-1行

ggyG        全部复制
set paste   粘贴取消自动缩进
```

# 查找

使用正则表达式

```shell
# 查找以空格开头的行
/^\s
```

# 替换

```
:g/old_words/s//new_words/g
```

# 删除

```
dd      删除当前行，并把删除的行存到剪贴板里
d$      删除到行尾
dh      删除光标前的字符
,$d     从当前行一直删除到文件尾部
,行号d   删除当前行到指定行
dG      全部删除
dt) 条件删除，一直删除到这行的)

删除光标：x

删除光标左侧：X

删除光标所在的单词：dw

删除当前行：dd

删除光标至行尾：d$或D

删除当前行及以下n-1行：ndd  『n是数字，是要删除的行数』

删除n到m行： :n,m d 『删除1到3行     :1,3 d』 当m 用$ 时，表示到文档尾
```

# 撤销、重做

    u       撤销上一步的操作
    Ctrl+r  恢复上一步被撤销的操作

# 列编辑

1. 进入`VISUAL BLOCK`模式:移动光标到要注释区块的第一行，Unix下按Ctrl+v，Windows版本的VIM则按Ctrl+Q
2. 选择所需要的行:光标移动到要注释区块的最后一行(若干个j，或者直接输入行号再按G等)
3. 针对列的操作: 例如删除多列，先移动光标选择列，之后输入d，例如替换，输入c，需要插入则按Shift+I(这里的用法同VIM的单行操作类似)
4. 退出保存:按 ESC

# 代码对齐
1. ctrl + v (选中块)
2. ctrl + f (向前) 或 ctrl +v (向后)
3. 按"=", 把选中的代码对齐。=是按格式对齐缩进，=%是对齐括号间的语句块

# 缩进
在命令模式下

    >> 将行向右移动8个空格
    n>> 将连续n行向左或向右缩进8个空格
    如当程序代码中有连续5行没有缩进，要进行缩进更正，使用5>>就可以实现这5行均缩进。


# 打开/保存/退出/改变文件(Buffer)

    :e <path/to/file> → 打开一个文件
    :w → 存盘
    :saveas <path/to/file> → 另存为 <path/to/file>
    :x， ZZ 或 :wq → 保存并退出 (:x 表示仅在需要时保存，ZZ不需要输入冒号并回车)
    :q! → 退出不保存 :qa! 强行退出所有的正在编辑的文件，就算别的文件有更改。
    :bn 和 :bp → 你可以同时打开很多文件，使用这两个命令来切换下一个或上一个文件。（陈皓注：我喜欢使用:n到下一个文件）

# 重新载入当前文件：
    :e
    :e! #放弃当前修改，强制重新载入

# 取消高亮
命令模式下，输入`/.`把vi所打开文件的文本都变成了浅黄色，解决办法，命令模式下，输入`:nohl`

#打开gb18030乱码
编辑文件~/.vimrc，添加如下内容

```shell
set fileencodings=utf-8,gb2312,gb18030
set termencoding=utf-8
set fileformats=unix
set encoding=prc
```

# 查看修改文件编码

```shell
# 查看
:set fileencoding
# 设置编码
:set encoding=utf-8
```

# 参考
[简明 Vim 练级攻略](http://coolshell.cn/articles/5426.html?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io)
[在线VIM编辑器模拟学习 - aTool在线工具](http://www.atool.org/vim.php)

# temp

进入vi的命令
vi filename :打开或新建文件，并将光标置于第一行首
vi +n filename ：打开文件，并将光标置于第n行首
vi + filename ：打开文件，并将光标置于最后一行首
vi +/pattern filename：打开文件，并将光标置于第一个和pattern匹配的串处
vi -r filename ：在上次正用vi编辑时发生系统崩溃，恢复filename
vi filename....filename ：打开多个文件，依次进行编辑
移动光标类命令


nz：将第n行滚至屏幕顶部，不指定n时将当前行滚至屏幕顶部。
插入文本类命令
i ：在光标前
I ：在当前行首
a：光标后
A：在当前行尾
o：在当前行之下新开一行
O：在当前行之上新开一行
r：替换当前字符
R：替换当前字符及其后的字符，直至按ESC键
s：从当前光标位置处开始，以输入的文本替代指定数目的字符
S：删除指定数目的行，并以所输入文本代替之
ncw或nCW：修改指定数目的字
nCC：修改指定数目的行
删除命令
ndw或ndW：删除光标处开始及其后的n-1个字
d0：删至行首
d$：删至行尾
ndd：删除当前行及其后n-1行
x或X：删除一个字符，x删除光标后的，而X删除光标前的
Ctrl+u：删除输入方式下所输入的文本
搜索及替换命令
/pattern：从光标开始处向文件尾搜索pattern
?pattern：从光标开始处向文件首搜索pattern
n：在同一方向重复上一次搜索命令
N：在反方向上重复上一次搜索命令
：s/p1/p2/g：将当前行中所有p1均用p2替代
：n1,n2s/p1/p2/g：将第n1至n2行中所有p1均用p2替代
：g/p1/s//p2/g：将文件中所有p1均用p2替换
选项设置
all：列出所有选项设置情况
term：设置终端类型
ignorance：在搜索中忽略大小写
list：显示制表位(Ctrl+I)和行尾标志（$)
number：显示行号
report：显示由面向行的命令修改过的数目
terse：显示简短的警告信息
warn：在转到别的文件时若没保存当前文件则显示NO write信息
nomagic：允许在搜索模式中，使用前面不带“”的特别字符
nowrapscan：禁止vi在搜索到达文件两端时，又从另一端开始
mesg：允许vi显示其他用户用write写到自己终端上的信息
最后行方式命令
：n1,n2 co n3：将n1行到n2行之间的内容拷贝到第n3行下
：n1,n2 m n3：将n1行到n2行之间的内容移至到第n3行下
：n1,n2 d ：将n1行到n2行之间的内容删除
：w ：保存当前文件
：e filename：打开文件filename进行编辑
：x：保存当前文件并退出
：q：退出vi
：q!：不保存文件并退出vi
：!command：执行shell命令command
：n1,n2 w!command：将文件中n1行至n2行的内容作为command的输入并执行之，若不指定n1，n2，则表示将整个文件内容作为command的输入
：r!command：将命令command的输出结果放到当前行
寄存器操作
"?nyy：将当前行及其下n行的内容保存到寄存器？中，其中?为一个字母，n为一个数字
"?nyw：将当前行及其下n个字保存到寄存器？中，其中?为一个字母，n为一个数字
"?nyl：将当前行及其下n个字符保存到寄存器？中，其中?为一个字母，n为一个数字
"?p：取出寄存器？中的内容并将其放到光标位置处。这里？能是个字母，也能是个数字
ndd：将当前行及其下共n行文本删除，并将所删内容放到1号删除寄存器中。
进入vi
vi test
离开vi
:q! 离开vi,并放弃刚在缓冲区内编辑的内容。
　　 :wq 将缓冲区内的资料写入磁盘中，并离开vi。
　　 :ZZ 同wq
同wq
:w 将缓冲区内的资料写入磁盘中，但并不离开vi。
　　:q 离开vi,若文件被修改过，则会被需求确认是否放弃修改的内容，此指令可和: w 配合使用。
Vi 的操作模式
Vi 提供两种操作模式：
输入模式（insert mode）
指令模式（command mode）
当使用者进入vi后，既处于指令模式下，此刻键入所有字元皆被视为指令。
输入模式：a(append) 游标之后加入资料。
A 该行之末加入资料
i (insert) 游标之前加入资料
I 该行之首加入资料
o (open) 新增一行和该行之下供输入资料
O 新增一行和该行之上供输入资料
指令模式：B 　 　　　移至该行第一个字符，若光标在该行第一字符则光标移至上一行第一字符。
　　 b 　　 由游标所在位置之前一个字串的第一个字元
　　　　　cc 删除整行，修改整行的内容。
　　　　　D　　　　　 以行为单位，删除游标在内后面的所有字符。
db 删除该行光标前字符
　　　　　dd 删除该行
　　　　　de 删除自光标开始后面的字符
　　　　　d加字符　　　删除光标所在位置至字符之间的单
　　　　　E　　　　　　移至该行最后字符，若光标在该行最后字符则光标移至下一行最后字符
　e　　　　　　由游标所在位置至该字串的最后一个字元
　　　　　G 移至该档案的最后一行　
　　　　　h 向前移一个字元

　　　　　l 向后移一个字符
nG 移至该档案的第n行
n+ 自游标所在位置向后移n行至该行的第一字符
n- 自游标所在位置向前移n行至该行的第一字符
R 进入取代状态，直到《ESC》为止
s 删除游标所在字元，并进入取代模式直到《ESC》
S 删除游标所在之该行资料，并进入输入模式直到《ESC》
w 由游标所在位置之下一个字串的第一个字元
x 删除游标所在该字元。
X 删除游标所在之前一字元。
r 用接于此指令之后的字元取代（replace）游标所在字元
yy yank整行，使游标所在该行复制到记忆体缓冲区
显示该行之行号、档案名称、档案中最末之行号、游标所在行号占
总行号之百分比
$ 由游标所在位置至该行的最后一个字元。
） 由游标所在位置至下一个句子的第一个字元。
（ 由游标所在位置至该句子的第一个字元。
{ 由游标所在位置至该段落的最后一个字元。
} 由游标所在位置至该段落的第一个字元
yank和delete可将指定的资料复制到记忆体缓冲区，而藉有put指令可将缓冲区内的资料复制到荧幕上
例如：搬移一行 ：在该行执行dd
游标移至目的地
执行p
复制一行 ：在该行执行yy
游标移至目的地
执行p
视窗移动：
视窗往下卷一页
视窗往上卷一页
视窗往下卷半页
视窗往上卷半页
视窗往下卷一行
视窗往上卷一行
删除、复制及修改指令介绍：
d(delete)、c(change)和y(yank)这一类的指令在vi 中的指令格式为：
operation+scope=command
(运算子)（范围）
运算子：
d 删除指令。删除资料，但会将删除资料复制到记忆体缓冲区。
y 将资料（字组、行列、句子或段落）复制到缓冲区。
p 放置（put）指令，和d和y配合使用。可将最后delete或yank的资料放置于游标所在位置之行列下。
c 修改（change）指令，类似delete于insert的组合。删除一个字组、句子等资料，并插入新键入的
