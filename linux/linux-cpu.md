
## 查看物理CPU个数、核数、逻辑CPU个数
```shell
# 总核数 = 物理CPU个数 X 每颗物理CPU的核数
# 总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数

# 查看物理CPU个数
cat /proc/cpuinfo| grep "physical id"| sort| uniq| wc -l

# 查看每个物理CPU中core的个数(即核数)
cat /proc/cpuinfo| grep "cpu cores"| uniq

# 查看逻辑CPU的个数
cat /proc/cpuinfo| grep "processor"| wc -l

# 查看CPU信息（型号）
cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c
```

## 查看所有cpu的使用情况

mpstat是Multiprocessor Statistics的缩写，是实时系统监控工具。其报告与CPU的一些统计信息，这些信息存放在/proc/stat文件中。在多CPUs系统里，其不但能查看所有CPU的平均状况信息，而且能够查看特定CPU的信息。mpstat最大的特点是：可以查看多核心cpu中每个计算核心的统计数据；而类似工具vmstat只能查看系统整体cpu情况。

```
mpstat [-P {|ALL}] [internal [count]]
参数 解释
-P {|ALL} 表示监控哪个CPU， cpu在[0,cpu个数-1]中取值
internal 相邻的两次采样的间隔时间、
count 采样的次数，count只能和delay一起使用
当没有参数时，mpstat则显示系统启动以后所有信息的平均值。有interval时，第一行的信息自系统启动以来的平均信息。从第二行开始，输出为前一个interval时间段的平均信息。
```

```sh
[work@lab22 logs]$ mpstat  -P ALL 2
Linux 2.6.32-573.18.1.el6.x86_64 (lab22)        07/13/2017      _x86_64_        (32 CPU)

05:18:37 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle
05:18:39 PM  all    0.02    0.00    0.02    0.00    0.00    0.00    0.00    0.00   99.97
05:18:39 PM    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    1    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    2    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    3    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    4    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    5    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    6    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    7    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    8    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM    9    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   10    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   11    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   12    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   13    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   14    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   15    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   16    0.00    0.00    0.50    0.00    0.00    0.00    0.00    0.00   99.50
05:18:39 PM   17    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   18    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   19    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   20    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   21    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   22    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   23    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   24    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   25    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   26    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   27    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   28    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   29    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
05:18:39 PM   30    0.00    0.00    0.00    0.00    0.00    0.50    0.00    0.00   99.50
05:18:39 PM   31    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
```
