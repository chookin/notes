# 201711校招笔试题

# 1122

文件`test.log`是用户行为日志，内容示例如下：

```
117.169.2.98 - - [20/Nov/2017:13:00:00 +0800] "GET /sv/106/336/27719/6?v=1511153999998 HTTP/1.1" 200 1 "-" "Java/1.7.0_45" 309
222.89.168.235 - - [20/Nov/2017:13:00:00 +0800] "GET /sv/99/332/22706/6?v=1&ip=222.89.168.235&t=6736542715 HTTP/1.1" 200 1 "http://html5.mail.100826.cn" "Mozilla/5.0 (Linux; U; Android 5.1; zh-cn; OPPO OppoBrowser/4.3.9" 288
```

- 日志文件的每一行，字段间以空格分割，默认第一个符合IP格式的字段是用户IP，但是当记录中包含`&ip=`且其参数值符合IP的格式，例如，`222.89.168.235`，则以该参数值作为用户IP。



文件`ipnew.data`是IP库，内容示例如下：

```
0.0.0.0 0.255.255.255   32
1.0.0.0 1.0.0.255   56
1.0.1.0 1.0.3.255   12
1.0.4.0 1.0.7.255   56
1.0.8.0 1.0.15.255  18
1.0.16.0    1.0.31.255  226
1.0.32.0    1.0.63.255  18
```

- IP库文件中的每一行定义了一个IP区间及该IP区间所属的`area id`；
- IP库文件的行是升序的;
- IP库文件有446970行，大小是14M；
- IP库文件的每一行，字段间以空白字符分割，从前往后各字段依次是：
    + IP区间的起始IP；
    + IP区间的终止IP(包含)；
    + 该IP区间所属area的id。

请用c/c++，java，或python编写程序，遍历读取该日志文件的每一行，解析日志记录中的用户IP，从IP库中查询该IP所属的`area id`，输出用户IP及IP所属的`area id`到控制台。

# 1123

请用c/c++，java，或python实现一个环形链表，链表需是线程安全的。
该链表需具有如下方法：

1. 获取当前元素；
2. 移动当前指针到下一个元素；
3. 获取链表中当前元素个数；
4. 插入元素重复n次到链表中，插入后的链表中元素需均匀分布，例如，若当前链表是`A->B->C->A->C`，待插入的元素为`D`，重复次数为`2`，则插入后的链表需是`A->B->C->D->A->C-D`；
5. 从链表中删除元素值为指定值的。

# 1124

请用c/c++，java，或python实现一个具有优先级的`Request`调度器类。

1. 该调度器类是线程安全的。
2. 该调度器类维护着一个待处理`Request`的集合，该集合中优先级高的`Request`先被处理，当优先级相同时，先插入集合的元素先被处理；
3. 该调度器类维护着一个已处理的`Request`的集合。



该调度器类具有如下方法：

1. 添加`Request`到调度器，若该`Request`未被处理，添加其到`待处理集合`；
2. 从调度器中获取一个未处理的`Request`，当获取后，自动从`待处理集合`中删除之；
3. 标记一个`Request`为已处理，即添加该`Request`到`已处理集合`；
4. clear方法，清空`待处理集合`和`已处理集合`；
5. 获取`待处理集合`中元素个数；
6. 获取`已处理集合`中元素个数；

